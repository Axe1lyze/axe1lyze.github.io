<html>
    
    <body>
        <script>
            function textareaOnKeyup(elem){
                var map = [];
                elem.value.split(/\r\n|\n|,| /).forEach(i => {
                    map[i.trim()] = 0;
                });
                var result = Object.keys(map).join(',');
                document.querySelector('#result').value = result;
                document.querySelector('#textCount').textContent = result.length;
            }
        </script>
        <div id="textCount">0</div>
        <input id="result" type="text" style="width: 100%;" />
        <hr />
        <textarea id="text" onkeyup="textareaOnKeyup(this);" style="width: 100%; height:320px"></textarea>
    </body>
</html>
